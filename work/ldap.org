#+TITLE: LDAP
#+AUTHOR: LavenLiu
#+DATE: 2010-05-04
#+EMAIL: ldczz2008@163.com 

#+STARTUP: OVERVIEW
#+TAGS: OFFICE(o) HOME(h) PROJECT(p) CHANGE(c) REPORT(r) MYSELF(m) 
#+TAGS: PROBLEM(P) INTERRUPTTED(i) RESEARCH(R)
#+SEQ_TODO: TODO(t)  STARTED(s) WAITING(W) | DONE(d) CANCELLED(C) DEFERRED(f)
#+COLUMNS: %40ITEM(Details) %TAGS(Context) %7TODO(To Do) %5Effort(Time){:} %6CLOCKSUM{Total}

#+LaTeX_CLASS: article
#+LaTeX_CLASS_OPTIONS: [a4paper,11pt]
#+LaTeX_HEADER: \usepackage[top=2.1cm,bottom=2.1cm,left=2.1cm,right=2.1cm]{geometry}
#+LaTeX_HEADER: \setmainfont[Mapping=tex-text]{Times New Roman}
#+LaTeX_HEADER: \setsansfont[Mapping=tex-text]{Tahoma}
#+LaTeX_HEADER: \setmonofont{Courier New}
#+LaTeX_HEADER: \setCJKmainfont[BoldFont={Adobe Heiti Std},ItalicFont={Adobe Kaiti Std}]{Adobe Song Std}
#+LaTeX_HEADER: \setCJKsansfont{Adobe Heiti Std}
#+LaTeX_HEADER: \setCJKmonofont{Adobe Fangsong Std}
#+LaTeX_HEADER: \punctstyle{hangmobanjiao}
#+LaTeX_HEADER: \usepackage{color,graphicx}
#+LaTeX_HEADER: \usepackage[table]{xcolor}
#+LaTeX_HEADER: \usepackage{colortbl}
#+LaTeX_HEADER: \usepackage{listings}
#+LaTeX_HEADER: \usepackage[bf,small,indentafter,pagestyles]{titlesec}

#+HTML_HEAD: <link rel="stylesheet" type="text/css" href="css/style2.css" />

#+OPTIONS: ^:nil
#+OPTIONS: tex:t

* LDAP
** LDAP基本概念中常用的名称缩写及含义
   | 关键字 | 英文全称           | 说明                                                               |
   |--------+--------------------+--------------------------------------------------------------------|
   | dc     | Domain Component   | 域名的部分，其格式是将完整的域名分成几部分，如域名为lavenliu.com   |
   |        |                    | 变成dc=lavenliu,dc=com                                             |
   |--------+--------------------+--------------------------------------------------------------------|
   | uid    | User Id            | 用户ID，如"taoqi"                                                  |
   |--------+--------------------+--------------------------------------------------------------------|
   | ou     | Organization Unit  | 组织单位，类似于Linux文件系统中的子目录，它是一个容器对象，        |
   |        |                    | 组织单位可以包含其他各种对象（包括其他组织单元），如“support”      |
   |--------+--------------------+--------------------------------------------------------------------|
   | cn     | Common Name        | 公共名称，如“James Bond”                                           |
   |--------+--------------------+--------------------------------------------------------------------|
   | sn     | Surname            | 姓，如“Bond”                                                       |
   |--------+--------------------+--------------------------------------------------------------------|
   | dn     | Distinguished Name | 唯一辨别名，类似于Linux文件系统中的绝对路径，每个对象都有一个唯一  |
   |        |                    | 的名称，如“uid=tom,ou=market,dc=lavenliu,dc=com”，在一个目录树中   |
   |        |                    | dn总是唯一的                                                       |
   |--------+--------------------+--------------------------------------------------------------------|
   | rdn    | Relative dn        | 相对辨别名，类似于文件系统中的相对路径，它是于目录结构无关的部分， |
   |        |                    | 如“uid=tom”或“cn=James Bond”                                       |
   |--------+--------------------+--------------------------------------------------------------------|
   | c      | Country            | 国家，如"CN"或"US"等                                               |
   |--------+--------------------+--------------------------------------------------------------------|
   | o      | Organization       | 组织名，如"Lavenliu, Inc."                                         |
** 安装服务端
   #+BEGIN_SRC sh
192.168.1.107 lavenliu.com
   #+END_SRC

   安装ldap master：
   #+BEGIN_SRC sh
yum install -y openldap openldap-*
# 真的需要安装如下的软件包吗？
yum install -y nscd nss-pam-ldap nss-* gcc* pcre pcre-*
   #+END_SRC

* 配置LDAP服务端
  #+BEGIN_SRC sh
ldapsearch -LLL -W -x -H ldap://lavenliu.com -D "cn=lavenliu,dc=lavenliu,dc=com" -b "dc=lavenliu,dc=com"
Enter LDAP Password: 
dn: dc=lavenliu,dc=com
objectClass: dcObject
objectClass: organization
o: LavenLiu, Inc.
dc: lavenliu

dn: cn=lavenliu,dc=lavenliu,dc=com
objectClass: organizationalRole
cn: lavenliu
  #+END_SRC
* 遇到的问题
  #+BEGIN_EXAMPLE
1. 
Repository base is listed more than once in the configuration
Repository updates is listed more than once in the configuration
Repository extras is listed more than once in the configuration
Repository centosplus is listed more than once in the configuration
Repository contrib is listed more than once in the configuration

2.
Error:  Multilib version problems found. This often means that the root
       cause is something else and multilib version checking is just
       pointing out that there is a problem. Eg.:
       
         1. You have an upgrade for nss-softokn-freebl which is missing some
            dependency that another package requires. Yum is trying to
            solve this by installing an older version of nss-softokn-freebl of the
            different architecture. If you exclude the bad architecture
            yum will tell you what the root cause is (which package
            requires what). You can try redoing the upgrade with
            --exclude nss-softokn-freebl.otherarch ... this should give you an error
            message showing the root cause of the problem.
       
         2. You have multiple architectures of nss-softokn-freebl installed, but
            yum can only see an upgrade for one of those arcitectures.
            If you don't want/need both architectures anymore then you
            can remove the one with the missing update and everything
            will work.
       
         3. You have duplicate versions of nss-softokn-freebl installed already.
            You can use "yum check" to get yum show these errors.
       
       ...you can also use --setopt=protected_multilib=false to remove
       this checking, however this is almost never the correct thing to
       do as something else is very likely to go wrong (often causing
       much more problems).
       
       Protected multilib versions: nss-softokn-freebl-3.14.3-23.el6_7.x86_64 != nss-softokn-freebl-3.14.3-9.el6.i686
 You could try using --skip-broken to work around the problem
 You could try running: rpm -Va --nofiles --nodigest
  #+END_EXAMPLE
